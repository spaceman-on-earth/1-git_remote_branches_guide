# Working with Remotes

Guide to working with remotes. Russian edition.

---

Для совместной работы над проектами Git требуются навыки управления удаленными репозиториями. Удаленные репозитории представляют собой версии проекта, хранимые в Интернете или где-то в сети. Их может быть несколько, и каждый в общем случае доступен вам только для чтения или же для чтения и записи.  

Взаимодействие с другими пользователями предполагает управление удалёнными репозиториями, а также отправку и получение данных из них. Управление репозиториями включает в себя как умение добавлять новые, так и умение удалять устаревшие репозитории, а также умение управлять различными удалёнными ветками, объявлять их отслеживаемыми или нет и так далее.

## Отображение удаленных репозиториев (git remote)

Просмотр уже настроенных удаленных серверов осуществляется командой **git remote**. Она дает список коротких имен для всех указанных вами областей удаленной работы. Если репозиторий был клонирован, вы должны увидеть по крайней мере источник, то есть имя, которое Git по умолчанию присваивает клонируемому серверу:

    $ git clone https://github.com/schacon/ticgit
    Cloning into 'ticgit'...
    remote: Reusing existing pack: 1857, done.
    remote: Total 1857 (delta 0), reused 0 (delta 0)
    Receiving objects: 100% (1857/1857), 374.35 KiB | 268.00 KiB/s, done.
    Resolving deltas: 100% (772/772), done.
    Checking connectivity... done.
    $ cd ticgit
    $ git remote
    origin

Параметр **-v** позволяет увидеть URL-адреса, которые Git хранит для сокращенного имени, используемого при чтении из данного удаленного репозитория и при записи в него:

    $ git remote -v
    Origin https://github.com/schacon/ticgit (fetch)
    Origin https://github.com/schacon/ticgit (push)

Если репозиториев несколько, они выводятся списком. Скажем, репозиторий с несколькими удаленными копиями для совместной работы с коллегами может выглядеть следующим образом:

    $ git remote -v
    bakkdoor https://github.com/bakkdoor/grit (fetch)
    bakkdoor https://github.com/bakkdoor/grit (push)
    cho45 https://github.com/cho45/grit (fetch)
    cho45 https://github.com/cho45/grit (push)
    defunkt https://github.com/defunkt/grit (fetch)
    defunkt https://github.com/defunkt/grit (push)
    koke git://github.com/koke/grit.git (fetch)
    koke git://github.com/koke/grit.git (push)
    origin git@github.com:mojombo/grit.git (fetch)
    origin git@github.com:mojombo/grit.git (push)

Это означает, что мы легко можем скачать себе изменения, внесенные любым из этих пользователей.

## Добавление удаленных репозиториев (git remote add)

Чтобы добавить такой репозиторий под коротким именем, которое упростит дальнейшие обращения к нему, используйте команду **git remote add [сокращенное имя] [url]**:

    $ git remote add pb https://github.com/paulboone/ticgit
    $ git remote -v
    origin https://github.com/schacon/ticgit (fetch)
    origin https://github.com/schacon/ticgit (push)
    pb https://github.com/paulboone/ticgit (fetch)
    pb https://github.com/paulboone/ticgit (push)

Теперь вместо полного URL-адреса в командную строку можно вводить имя pb. К примеру, для скачивания всей информации, которая есть у коллеги, но отсутствует у вас, используйте команду **git fetch pb**:

    $ git fetch pb
    remote: Counting objects: 43, done.
    remote: Compressing objects: 100% (36/36), done.
    remote: Total 43 (delta 10), reused 31 (delta 5)
    Unpacking objects: 100% (43/43), done.
    From https://github.com/paulboone/ticgit
    * [new branch] master -> pb/master
    * [new branch] ticgit -> pb/ticgit

Ветка master этого коллеги теперь доступна вам локально как pb/master. Вы можете выполнить ее слияние с одной из ваших веток или перейти в нее, если требуется просто проверить ее содержимое.

## Извлечение данных из удаленных репозиториев

Извлечение данных из удаленных проектов выполняется такой командой **git fetch [имя удаленного репозитория]**

Эта команда связывается с удаленным проектом и извлекает оттуда все пока отсутствующие у вас данные. После этого у вас должны появиться ссылки на все ветки удаленного проекта, которые можно подвергнуть слиянию или просмотреть.

Когда вы клонируете репозиторий, команда **git clone** автоматически добавляет этот удалённый репозиторий под именем «origin».  
Соответственно команда **git fetch origin** извлекает все, что появилось на этом сервере после его клонирования (или после момента последнего извлечения информации).  
Важно понимать, что команда git fetch помещает все данные в ваш локальный репозиторий, — *она не выполняет автоматическое слияние с ветками, с которыми вы работаете в данный момент, и вообще никак не затрагивает эти ветки*.  
Слияние вы выполните вручную, как только в этом возникнет необходимость.  

Если же у вас есть ветка, настроенная на слежение за какой-то удаленной веткой, команда **git pull** будет автоматически извлекать информацию из удаленной ветки и выполнять слияние с текущей веткой. В некоторых случаях такой порядок вещей оказывается проще и удобнее.  
Кроме того, по умолчанию команда **git clone** автоматически настраивает вашу локальную ветку master на слежение за удаленной веткой master (она может иметь и другое имя) на сервере, с которого вы выполняли клонирование.  
В общем случае команда **git pull** извлекает (fetch) данные с сервера, который вы клонировали, и автоматически пытается слить (merge) их с вашим текущим рабочим кодом.

## Отправка данных в удаленный репозиторий (git push)

Чтобы поделиться результатами своего труда, их нужно отправить в репозиторий. Это делается простой командой **git push [имя удаленного сервера] [ветка]**.

**Команда сработает только при условии**, что клонирование осуществлялось с сервера, где у вас есть доступ на запись, и за это время никто не отправлял туда свои данные. Если вы выполнили клонирование одновременно с другим пользователем и он уже отправил результаты своей работы на сервер, ваша попытка отправки данных окончится неудачей. Вам сначала нужно скачать все добавленное этим пользователем и встроить это в свои данные, и только после этого появится возможность воспользоваться командой git push.

## Просмотр удаленных репозиториев

Для получения дополнительной информации о конкретном удаленном репозитории применяется команда **git remote show [имя удаленного сервера]**.

    $ git remote show origin
    * remote origin
    Fetch URL: https://github.com/schacon/ticgit
    Push URL: https://github.com/schacon/ticgit
    HEAD branch: master
    Remote branches:
    master tracked
    dev-branch tracked
    Local branch configured for 'git pull':
    master merges with remote master
    Local ref configured for 'git push':
    master pushes to master (up to date)

Выводятся URL-адрес удаленного репозитория и информация об отслеживаемых ветках. Команда услужливо сообщает, что если, находясь в ветке master, вы запускаете команду git pull, ветка master с удаленного сервера будет автоматически слита с вашей сразу же после скачивания всех необходимых данных. Кроме того, она выводит на экран список всех скачанных ею ссылок.

## Удаление и переименование удаленных репозиториев

Переименование ссылок осуществляется командой **git remote rename**, меняющей сокращенные имена удаленных репозиториев.

Если по какой-то причине вы хотите удалить ссылку на удаленный репозиторий (например, вы поменяли сервер, больше не используете конкретное зеркало или участник проекта перестал вносить в него вклад), используйте команду **git remote rm**.