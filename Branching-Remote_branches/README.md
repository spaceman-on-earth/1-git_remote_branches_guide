# Git remote branches guide

Guide to basic operations with remote branches in Git.  
Russian edition.  

---

Удаленные ветки представляют собой ссылки на состояния веток в удаленных репозиториях. Перемещать их локально вы не можете; они смещаются автоматически при каждом подключении по сети. Удаленные ветки работают как закладки, напоминающие, где в удаленных репозиториях находились соответствующие ветки во время вашего последнего подключения к ним.

Они имеют форму **(имя удаленного репозитория)/(ветка)**. К примеру, чтобы увидеть, как выглядела ветка master на сервере origin во время последнего взаимодействия с ним, проверьте ветку origin/master.  

Проясним ситуацию на примере. Предположим, у вас есть Git-сервер с адресом git.ourcompany.com. При клонировании с этого адреса Git автоматически присваивает копии имя origin, извлекает все данные, создает указатель на местоположение ветки master и присваивает ему локальное имя origin/master. Одновременно вам предоставляется собственная локальная ветка master, берущая начало в том же самом месте, что и одноименная ветка копии, что дает вам отправную точку для начала работы:

![Удаленный и локальный репозитории после клонирования](https://git-scm.com/book/en/v2/images/remote-branches-1.png "Удаленный и локальный репозитории после клонирования")

Если во время вашей работы на локальной ветке master кто-то отправит на сервер git.ourcompany.com результаты своего труда и обновит удаленную ветку master, истории веток будут развиваться по-разному. Кроме того, до момента связи с сервером origin указатель origin/master у вас двигаться не будет:

![Локальная и удалённая работа может расходиться](https://git-scm.com/book/en/v2/images/remote-branches-2.png "Локальная и удаленная версии ветки могут различаться")

Синхронизация работы осуществляется командой **git fetch origin**. Она ищет сервер с именем «origin» (в данном случае это сервер git.ourcompany.com), извлекает оттуда все пока отсутствующие у вас данные, обновляет вашу локальную базу данных и сдвигает указатель origin/master на новую, более актуальную позицию:

![Команда git fetch обновляет ссылки на удаленный репозиторий](https://git-scm.com/book/en/v2/images/remote-branches-3.png "Команда git fetch обновляет ссылки на удаленный репозиторий")

Чтобы продемонстрировать, как будут выглядеть удаленные ветки при наличии нескольких удаленных серверов, предположим, что у вас есть еще один внутренний сервер Git, которым пользуется только одна из групп разработчиков. Этот сервер находится по адресу git.team1.ourcompany.com. Добавить его в качестве новой удаленной ссылки на проект, над которым вы сейчас работаете, можно уже знакомой вам командой **git remote add**. Присвойте этому удаленному серверу имя teamone:

![Добавление еще одного удаленного сервера](https://git-scm.com/book/en/v2/images/remote-branches-4.png "Добавление еще одного удаленного сервера")

Теперь можно воспользоваться командой git fetch teamone и получить все данные, отсутствующие у вас, но имеющиеся на сервере teamone. Однако поскольку пока этот сервер содержит всего лишь часть данных с сервера origin, система Git ничего не скачает, а только сгенерирует удаленную ветку teamone/master, указывающую на тот же коммит, что и ветка master на сервере teamone:

![Удаленная отслеживающая ветка для ветки teamone/master](https://git-scm.com/book/en/v2/images/remote-branches-5.png "Удаленная отслеживающая ветка для ветки teamone/master")

## Отправка данных (git push)

Чтобы поделиться содержимым своей ветки с окружающими, ее нужно отправить на удаленный сервер, на котором у вас есть права на запись. Автоматической синхронизации локальных веток с удаленными серверами не происходит, поэтому ветки, которые вы хотите выставить на всеобщее обозрение, следует отправлять вручную. Такой подход дает возможность работать с личными ветками независимо от коллег, предоставляя доступ только к тематическим веткам, предназначенным для совместной работы.

Предположим, у вас есть ветка serverfix, над которой вы хотите работать вместе с коллегами. Ее следует отправить на сервер командой **git push (удаленный сервер) (ветка)**:

    $ git push origin serverfix
    Counting objects: 24, done.
    Delta compression using up to 8 threads.
    Compressing objects: 100% (15/15), done.
    Writing objects: 100% (24/24), 1.91 KiB | 0 bytes/s, done.
    Total 24 (delta 2), reused 0 (delta 0)
    To https://github.com/schacon/simplegit
    * [new branch] serverfix -> serverfix

Это в некотором роде сокращение. Система Git автоматически превращает имя ветки serverfix в запись refs/heads/serverfix:refs/heads/serverfix, что означает «возьмите мою локальную ветку serverfix и используйте для обновления удаленной ветки serverfix». Фрагмент refs/heads/, как правило, можно просто опустить. Вы также можете воспользоваться командой **git push origin serverfix:serverfix**, которая делает то же самое. Кроме того, данный формат позволяет переслать содержимое локальной ветки в удаленную ветку с другим именем. Достаточно вместо имени serverfix на удаленном сервере указать другой вариант, например **git push origin serverfix:awesomebranch**. В этом случае содержимое локальной ветки serverfix будет передано в ветку awesomebranch на удаленном сервере.  

> ПРИМЕЧАНИЕ  
> Каждый раз вводить свой пароль не нужно. Если для отправки данных вы используете протокол HTTPS, сервер Git будет просить вас указать имя пользователя и пароль для проверки прав доступа. По умолчанию эту информацию предлагается ввести в терминале, чтобы сервер мог сообщить вам, имеете ли вы право отправлять ему данные. Чтобы не делать этого при каждой отправке, настройте «кэш учетных данных». Проще всего несколько минут держать данную информацию в памяти, что легко достигается командой **git config --global credential.helper cache**.

Когда кто-то из ваших коллег в следующий раз решит скачать обновления с сервера, он получит ссылку в виде удаленной ветки origin/serverfix на то место, куда указывает серверная ветка serverfix:

    $ git fetch origin
    remote: Counting objects: 7, done.
    remote: Compressing objects: 100% (2/2), done.
    remote: Total 3 (delta 0), reused 3 (delta 0)
    Unpacking objects: 100% (3/3), done.
    From https://github.com/schacon/simplegit
    * [new branch] serverfix -> origin/serverfix

Имейте в виду, что получение новых удаленных веток при скачивании данных не означает автоматического появления их доступных для редактирования копий. Другими словами, у вас появляется не новая ветка serverfix, а только недоступный для редактирования указатель origin/serverfix.

Тем не менее, данные оттуда можно слить в текущую рабочую ветку, воспользовавшись командой **git merge origin/serverfix**. Если вам требуется собственная копия ветки serverfix, достаточно создать ее, взяв за основу удаленную ветку:

    $ git checkout -b serverfix origin/serverfix
    Branch serverfix set up to track remote branch serverfix from origin.
    Switched to a new branch 'serverfix'

В результате вы получаете для работы локальную ветку, которая начинается там же, где и ветка origin/serverfix.

## Слежение за ветками

## Получение данных с последующим слиянием

## Ликвидация веток с удаленного сервера


